<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Download Seismic Data &mdash; BPMF 2.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/nbsphinx-code-cells.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="../../_static/documentation_options.js?v=51b770b3"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Preprocess Seismic Data" href="2_preprocess_data.html" />
    <link rel="prev" title="Project Initialization" href="0_initialize_project.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            BPMF
              <img src="../../_static/bpmf.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../general.html">Pre-requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_initialize_project.html">Project Initialization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Download Seismic Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Defining-and-Initializing-the-Data-Folder-Architecture">Defining and Initializing the Data Folder Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Data-Selection">Data Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Download-the-Data">Download the Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Cleanup-the-Downloaded-Data">Cleanup the Downloaded Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Plot-the-Raw-Data">Plot the Raw Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="2_preprocess_data.html">Preprocess Seismic Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_network_file.html">Make Network File</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_travel_times.html">Compute P-/S-wave travel Times</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_backprojection.html">Backprojection of the Seismic Wavefield</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_relocate.html">Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_build_template_database.html">Build Template Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="8_template_matching.html">Template Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="9_build_earthquake_catalog.html">Build Earthquake Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_magnitudes.html">Earthquake Magnitudes: Seismic Moment, Moment Magnitude and Local Magnitude</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../updates.html">Updates</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BPMF</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tutorial.html">Tutorial</a></li>
      <li class="breadcrumb-item active">Download Seismic Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tutorial/notebooks/1_download_data.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Download-Seismic-Data">
<h1>Download Seismic Data<a class="headerlink" href="#Download-Seismic-Data" title="Link to this heading"></a></h1>
<p>In this notebook, we will download continuous seismic data from a public data center with <code class="docutils literal notranslate"><span class="pre">obspy</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">BPMF.config</span> <span class="kn">import</span> <span class="n">cfg</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">obspy</span> <span class="k">as</span> <span class="nn">obs</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">obspy.clients.fdsn</span> <span class="kn">import</span> <span class="n">mass_downloader</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DATE</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="s2">&quot;2012-07-26&quot;</span><span class="p">)</span>
<span class="n">DATA_BUFFER_SEC</span> <span class="o">=</span> <span class="mf">500.</span>
</pre></div>
</div>
</div>
<section id="Defining-and-Initializing-the-Data-Folder-Architecture">
<h2>Defining and Initializing the Data Folder Architecture<a class="headerlink" href="#Defining-and-Initializing-the-Data-Folder-Architecture" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ROOTDIRPATH_DATA</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">INPUT_PATH</span>
<span class="n">dirpath_data</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ROOTDIRPATH_DATA</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">DATE</span><span class="o">.</span><span class="n">year</span><span class="p">),</span> <span class="n">DATE</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="n">dirpath_raw_waveforms</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_data</span><span class="p">,</span> <span class="s2">&quot;raw&quot;</span><span class="p">)</span>
<span class="n">dirpath_resp_files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_data</span><span class="p">,</span> <span class="s2">&quot;resp&quot;</span><span class="p">)</span>

<span class="c1"># Create the repository if needed</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">dirpath_resp_files</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dirpath_resp_files</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Data-Selection">
<h2>Data Selection<a class="headerlink" href="#Data-Selection" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">obspy</span></code>’s fdsn downloader takes a <code class="docutils literal notranslate"><span class="pre">Domain</span></code> and a <code class="docutils literal notranslate"><span class="pre">Restrictions</span></code> instances to identify the data to request from the data center.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Geographical restrictions</span>
<span class="n">domain</span> <span class="o">=</span> <span class="n">mass_downloader</span><span class="o">.</span><span class="n">RectangularDomain</span><span class="p">(</span>
    <span class="n">minlatitude</span><span class="o">=</span><span class="mf">40.60</span><span class="p">,</span>
    <span class="n">maxlatitude</span><span class="o">=</span><span class="mf">40.76</span><span class="p">,</span>
    <span class="n">minlongitude</span><span class="o">=</span><span class="mf">30.20</span><span class="p">,</span>
    <span class="n">maxlongitude</span><span class="o">=</span><span class="mf">30.44</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Time and station restrictions</span>
<span class="n">restrictions</span> <span class="o">=</span> <span class="n">mass_downloader</span><span class="o">.</span><span class="n">Restrictions</span><span class="p">(</span>
    <span class="n">starttime</span><span class="o">=</span><span class="n">DATE</span> <span class="o">-</span> <span class="n">DATA_BUFFER_SEC</span><span class="p">,</span>
    <span class="n">endtime</span><span class="o">=</span><span class="n">DATE</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span> <span class="o">+</span> <span class="n">DATA_BUFFER_SEC</span><span class="p">,</span>
    <span class="n">network</span><span class="o">=</span><span class="s2">&quot;YH&quot;</span><span class="p">,</span>
    <span class="n">location</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="n">channel</span><span class="o">=</span><span class="s2">&quot;BH*,HH*&quot;</span><span class="p">,</span>
    <span class="n">station</span><span class="o">=</span><span class="s2">&quot;SAUV,SPNC,DC08,DC07,DC06,DD06,DE07,DE08&quot;</span><span class="p">,</span>
    <span class="n">reject_channels_with_gaps</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">minimum_length</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">minimum_interstation_distance_in_m</span><span class="o">=</span><span class="mf">500.0</span><span class="p">,</span>
    <span class="n">channel_priorities</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;HH[ZNE]&quot;</span><span class="p">,</span> <span class="s2">&quot;BH[ZNE]&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="c1"># Downloader instance</span>
<span class="n">downloader</span> <span class="o">=</span> <span class="n">mass_downloader</span><span class="o">.</span><span class="n">MassDownloader</span><span class="p">(</span><span class="n">providers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;IRIS&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
[2023-07-06 14:30:07,633] - obspy.clients.fdsn.mass_downloader - INFO: Initializing FDSN client(s) for IRIS.
[2023-07-06 14:30:07,941] - obspy.clients.fdsn.mass_downloader - INFO: Successfully initialized 1 client(s): IRIS.
</pre></div></div>
</div>
</section>
<section id="Download-the-Data">
<h2>Download the Data<a class="headerlink" href="#Download-the-Data" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># don&#39;t hesitate running this cell many times to make</span>
<span class="c1"># sure all the available data were downloaded</span>
<span class="c1"># some requests may fail due to busy data centers</span>
<span class="n">downloader</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
    <span class="n">domain</span><span class="p">,</span>
    <span class="n">restrictions</span><span class="p">,</span>
    <span class="n">mseed_storage</span><span class="o">=</span><span class="n">dirpath_raw_waveforms</span><span class="p">,</span>
    <span class="n">stationxml_storage</span><span class="o">=</span><span class="n">dirpath_resp_files</span><span class="p">,</span>
    <span class="n">threads_per_client</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
[2023-07-06 14:30:10,708] - obspy.clients.fdsn.mass_downloader - INFO: Total acquired or preexisting stations: 0
[2023-07-06 14:30:10,709] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Requesting reliable availability.
[2023-07-06 14:30:11,159] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully requested availability (0.45 seconds)
[2023-07-06 14:30:11,161] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Found 8 stations (24 channels).
[2023-07-06 14:30:11,199] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Will attempt to download data from 8 stations.
[2023-07-06 14:30:11,205] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Status for 24 time intervals/channels before downloading: NEEDS_DOWNLOADING
[2023-07-06 14:31:33,072] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:32:02,464] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:32:10,280] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:32:11,203] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:33:22,927] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 1 channels (of 1)
[2023-07-06 14:33:25,448] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 1 channels (of 1)
[2023-07-06 14:33:34,430] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:33:59,062] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:34:35,089] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 1 channels (of 1)
[2023-07-06 14:35:25,673] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded 3 channels (of 3)
[2023-07-06 14:35:25,674] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Launching basic QC checks...
[2023-07-06 14:35:26,452] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Downloaded 229.3 MB [746.52 KB/sec] of data, 0.0 MB of which were discarded afterwards.
[2023-07-06 14:35:26,453] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Status for 24 time intervals/channels after downloading: DOWNLOADED
[2023-07-06 14:35:26,804] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.DC07.xml&#39;.
[2023-07-06 14:35:26,809] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.DC06.xml&#39;.
[2023-07-06 14:35:26,811] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.DC08.xml&#39;.
[2023-07-06 14:35:27,044] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.DE07.xml&#39;.
[2023-07-06 14:35:27,047] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.DD06.xml&#39;.
[2023-07-06 14:35:27,051] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.DE08.xml&#39;.
[2023-07-06 14:35:27,282] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.SPNC.xml&#39;.
[2023-07-06 14:35:27,351] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Successfully downloaded &#39;../BPMF_data/2012/20120726/resp/YH.SAUV.xml&#39;.
[2023-07-06 14:35:27,386] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Downloaded 8 station files [2.0 MB] in 0.9 seconds [2307.39 KB/sec].
[2023-07-06 14:35:27,387] - obspy.clients.fdsn.mass_downloader - INFO: ============================== Final report
[2023-07-06 14:35:27,388] - obspy.clients.fdsn.mass_downloader - INFO: 0 MiniSEED files [0.0 MB] already existed.
[2023-07-06 14:35:27,389] - obspy.clients.fdsn.mass_downloader - INFO: 0 StationXML files [0.0 MB] already existed.
[2023-07-06 14:35:27,391] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Acquired 24 MiniSEED files [229.3 MB].
[2023-07-06 14:35:27,391] - obspy.clients.fdsn.mass_downloader - INFO: Client &#39;IRIS&#39; - Acquired 8 StationXML files [2.0 MB].
[2023-07-06 14:35:27,392] - obspy.clients.fdsn.mass_downloader - INFO: Downloaded 231.3 MB in total.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;IRIS&#39;: &lt;obspy.clients.fdsn.mass_downloader.download_helpers.ClientDownloadHelper at 0x7f6ec5a83ee0&gt;}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check the files in DIRPATH_WAVEFORMS</span>
<span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;../BPMF_data/2012/20120726/raw/YH.DC08..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC07..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SAUV..HHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC08..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SPNC..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE08..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE07..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE07..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DD06..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DD06..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC06..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC06..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC06..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE08..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE08..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE07..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DD06..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC07..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SAUV..HHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC08..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC07..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SAUV..HHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SPNC..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SPNC..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;]
</pre></div></div>
</div>
</section>
<section id="Cleanup-the-Downloaded-Data">
<h2>Cleanup the Downloaded Data<a class="headerlink" href="#Cleanup-the-Downloaded-Data" title="Link to this heading"></a></h2>
<p>Even though <code class="docutils literal notranslate"><span class="pre">mass_downloader.Restrictions</span></code> handles channel priorities, some components might end up being downloaded at multiple channels because of failed data requests (see the output of the previous cell). To avoid data duplicate and in the interest of keeping the memory footprint low, we now remove these duplicated data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fnmatch</span> <span class="kn">import</span> <span class="nb">filter</span> <span class="k">as</span> <span class="n">fnfilter</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># keep only HH channels when HH and BH channels were downloaded</span>
<span class="n">data_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">,</span> <span class="s2">&quot;*mseed&quot;</span><span class="p">))</span>
<span class="n">station_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_resp_files</span><span class="p">,</span> <span class="s2">&quot;*xml&quot;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">sta</span> <span class="ow">in</span> <span class="n">station_list</span><span class="p">:</span>
    <span class="n">sta_id</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sta</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sta_id</span><span class="p">)</span>
    <span class="n">BH_channels</span> <span class="o">=</span> <span class="n">fnfilter</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sta_id</span><span class="si">}</span><span class="s2">.*.BH*__*.mseed&quot;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">BH_channels</span><span class="p">:</span>
        <span class="n">cha_info</span> <span class="o">=</span> <span class="n">fname</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">)</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">sta_id</span><span class="p">):]</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">,</span> <span class="n">sta_id</span> <span class="o">+</span> <span class="n">cha_info</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.BH&quot;</span><span class="p">,</span> <span class="s2">&quot;.HH&quot;</span><span class="p">))):</span>
            <span class="c1"># the HH channel exists as well</span>
            <span class="c1"># get rid of the BH channel</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">data_list</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath_raw_waveforms</span><span class="p">,</span> <span class="s2">&quot;*mseed&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
YH.DC07
YH.DC08
YH.DC06
YH.DD06
YH.SPNC
YH.DE08
YH.SAUV
YH.DE07
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_list</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;../BPMF_data/2012/20120726/raw/YH.DC08..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC07..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SAUV..HHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC08..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SPNC..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE08..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE07..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE07..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DD06..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DD06..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC06..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC06..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC06..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE08..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE08..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DE07..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DD06..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC07..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SAUV..HHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC08..BHN__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.DC07..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SAUV..HHZ__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SPNC..BHE__20120725T235140Z__20120727T000820Z.mseed&#39;,
 &#39;../BPMF_data/2012/20120726/raw/YH.SPNC..BHZ__20120725T235140Z__20120727T000820Z.mseed&#39;]
</pre></div></div>
</div>
</section>
<section id="Plot-the-Raw-Data">
<h2>Plot the Raw Data<a class="headerlink" href="#Plot-the-Raw-Data" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">traces</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>
    <span class="n">traces</span> <span class="o">+=</span> <span class="n">obs</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">traces</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
24 Trace(s) in Stream:

YH.DC08..BHZ | 2012-07-25T23:51:40.000000Z - 2012-07-27T00:08:20.000000Z | 50.0 Hz, 4370001 samples
...
(22 other traces)
...
YH.SPNC..BHZ | 2012-07-25T23:51:40.000000Z - 2012-07-27T00:08:20.000000Z | 50.0 Hz, 4370001 samples

[Use &#34;print(Stream.__str__(extended=True))&#34; to print all Traces]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">config</span> InlineBackend.figure_formats = [&quot;svg&quot;]

<span class="n">fig</span> <span class="o">=</span> <span class="n">traces</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">equal_scale</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorial_notebooks_1_download_data_16_0.svg" src="../../_images/tutorial_notebooks_1_download_data_16_0.svg" /></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="0_initialize_project.html" class="btn btn-neutral float-left" title="Project Initialization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="2_preprocess_data.html" class="btn btn-neutral float-right" title="Preprocess Seismic Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Eric Beauce, William B. Frank.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>